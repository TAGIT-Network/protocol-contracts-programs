This is the canonical Codex file for this repo.

schema_version: 1.0
repo: protocol-contracts-programs
kind: contracts
owners: ["[OWNER_TEAM]", "[SECURITY_TEAM]"]
required_checks: [build, tests, slither, coverage>=80, sbom, sign]
variables:
  PROGRAM_FLAGS: "transfer,recall,reward"
environments:
  - { name: dev,   rpc_url: [L2_RPC],   signer: env:PRIVATE_KEY_DEV }
  - { name: stage, rpc_url: [L2_RPC],   signer: env:PRIVATE_KEY_STAGE, canary: { percent: 5, soak_minutes: 15 } }
  - { name: prod,  rpc_url: [L2_RPC],   signer: env:PRIVATE_KEY_PROD, approvals: ["[OWNER_TEAM]","[SECURITY_TEAM]"] }
steps:
  build:  [ { run: "forge build" } ]
  tests:  [ { run: "forge test --match-path test/*Programs*.t.sol" } ]
  deploy: [ { run: "codex deploy --repo protocol-contracts-programs --env {{ env }} --version {{ git_sha }}" } ]
  post_deploy:
    - run: codex verify --repo protocol-contracts-programs --env {{ env }} --checks events


(Replace placeholders later per manual steps.)
